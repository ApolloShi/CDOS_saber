{"remainingRequest":"/Users/shiliangliang/6cloud/saber/node_modules/babel-loader/lib/index.js!/Users/shiliangliang/6cloud/saber/node_modules/eslint-loader/index.js??ref--13-0!/Users/shiliangliang/6cloud/saber/src/cache.js","dependencies":[{"path":"/Users/shiliangliang/6cloud/saber/src/cache.js","mtime":1675244276580},{"path":"/Users/shiliangliang/6cloud/saber/babel.config.js","mtime":1675244276424},{"path":"/Users/shiliangliang/6cloud/saber/node_modules/cache-loader/dist/cjs.js","mtime":1676864065065},{"path":"/Users/shiliangliang/6cloud/saber/node_modules/babel-loader/lib/index.js","mtime":1676864056051},{"path":"/Users/shiliangliang/6cloud/saber/node_modules/eslint-loader/index.js","mtime":1676864063827}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport Vue from 'vue';\nimport store from \"./store\";\nVue.mixin({\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    next(function () {\n      var avueView = document.getElementById('avue-view');\n      if (avueView && to.meta.savedPosition) {\n        avueView.scrollTop = to.meta.savedPosition;\n      }\n    });\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    var _this = this;\n    var avueView = document.getElementById('avue-view');\n    if (from && from.meta.keepAlive) {\n      if (avueView) {\n        from.meta.savedPosition = avueView.scrollTop;\n      }\n      var result = this.$route.meta.keepAlive === true && store.state.tags.tagList.some(function (ele) {\n        return ele.value === _this.$route.fullPath;\n      });\n      if (this.$vnode && !result) {\n        from.meta.savedPosition = 0;\n        if (this.$vnode.parent && this.$vnode.parent.componentInstance && this.$vnode.parent.componentInstance.cache) {\n          if (this.$vnode.componentOptions) {\n            var key = this.$vnode.key == null ? this.$vnode.componentOptions.Ctor.cid + (this.$vnode.componentOptions.tag ? \"::\".concat(this.$vnode.componentOptions.tag) : '') : this.$vnode.key;\n            var cache = this.$vnode.parent.componentInstance.cache;\n            var keys = this.$vnode.parent.componentInstance.keys;\n            if (cache[key]) {\n              if (keys.length) {\n                var index = keys.indexOf(key);\n                if (index > -1) {\n                  keys.splice(index, 1);\n                }\n              }\n              delete cache[key];\n            }\n          }\n        }\n      }\n    }\n    next();\n  }\n});",{"version":3,"names":["Vue","store","mixin","beforeRouteEnter","to","from","next","avueView","document","getElementById","meta","savedPosition","scrollTop","beforeRouteLeave","keepAlive","result","$route","state","tags","tagList","some","ele","value","fullPath","$vnode","parent","componentInstance","cache","componentOptions","key","Ctor","cid","tag","keys","length","index","indexOf","splice"],"sources":["/Users/shiliangliang/6cloud/saber/src/cache.js"],"sourcesContent":["import Vue from 'vue'\r\nimport store from './store';\r\nVue.mixin({\r\n  beforeRouteEnter: function (to, from, next) {\r\n    next(() => {\r\n      let avueView = document.getElementById('avue-view');\r\n      if (avueView && to.meta.savedPosition) {\r\n        avueView.scrollTop = to.meta.savedPosition\r\n      }\r\n    })\r\n  },\r\n  beforeRouteLeave: function (to, from, next) {\r\n    let avueView = document.getElementById('avue-view');\r\n    if (from && from.meta.keepAlive) {\r\n      if (avueView) {\r\n        from.meta.savedPosition = avueView.scrollTop\r\n      }\r\n      const result = this.$route.meta.keepAlive === true && store.state.tags.tagList.some(ele => {\r\n        return ele.value === this.$route.fullPath;\r\n      });\r\n      if (this.$vnode && !result) {\r\n        from.meta.savedPosition = 0\r\n        if (this.$vnode.parent && this.$vnode.parent.componentInstance && this.$vnode.parent.componentInstance.cache) {\r\n          if (this.$vnode.componentOptions) {\r\n            let key = this.$vnode.key == null\r\n              ? this.$vnode.componentOptions.Ctor.cid + (this.$vnode.componentOptions.tag ? `::${this.$vnode.componentOptions.tag}` : '')\r\n              : this.$vnode.key;\r\n            let cache = this.$vnode.parent.componentInstance.cache;\r\n            let keys = this.$vnode.parent.componentInstance.keys;\r\n            if (cache[key]) {\r\n              if (keys.length) {\r\n                let index = keys.indexOf(key);\r\n                if (index > -1) {\r\n                  keys.splice(index, 1);\r\n                }\r\n              }\r\n              delete cache[key];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    next();\r\n  },\r\n});\r\n"],"mappings":";AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,KAAK;AACZD,GAAG,CAACE,KAAK,CAAC;EACRC,gBAAgB,EAAE,0BAAUC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAE;IAC1CA,IAAI,CAAC,YAAM;MACT,IAAIC,QAAQ,GAAGC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACnD,IAAIF,QAAQ,IAAIH,EAAE,CAACM,IAAI,CAACC,aAAa,EAAE;QACrCJ,QAAQ,CAACK,SAAS,GAAGR,EAAE,CAACM,IAAI,CAACC,aAAa;MAC5C;IACF,CAAC,CAAC;EACJ,CAAC;EACDE,gBAAgB,EAAE,0BAAUT,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAE;IAAA;IAC1C,IAAIC,QAAQ,GAAGC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;IACnD,IAAIJ,IAAI,IAAIA,IAAI,CAACK,IAAI,CAACI,SAAS,EAAE;MAC/B,IAAIP,QAAQ,EAAE;QACZF,IAAI,CAACK,IAAI,CAACC,aAAa,GAAGJ,QAAQ,CAACK,SAAS;MAC9C;MACA,IAAMG,MAAM,GAAG,IAAI,CAACC,MAAM,CAACN,IAAI,CAACI,SAAS,KAAK,IAAI,IAAIb,KAAK,CAACgB,KAAK,CAACC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,UAAAC,GAAG,EAAI;QACzF,OAAOA,GAAG,CAACC,KAAK,KAAK,KAAI,CAACN,MAAM,CAACO,QAAQ;MAC3C,CAAC,CAAC;MACF,IAAI,IAAI,CAACC,MAAM,IAAI,CAACT,MAAM,EAAE;QAC1BV,IAAI,CAACK,IAAI,CAACC,aAAa,GAAG,CAAC;QAC3B,IAAI,IAAI,CAACa,MAAM,CAACC,MAAM,IAAI,IAAI,CAACD,MAAM,CAACC,MAAM,CAACC,iBAAiB,IAAI,IAAI,CAACF,MAAM,CAACC,MAAM,CAACC,iBAAiB,CAACC,KAAK,EAAE;UAC5G,IAAI,IAAI,CAACH,MAAM,CAACI,gBAAgB,EAAE;YAChC,IAAIC,GAAG,GAAG,IAAI,CAACL,MAAM,CAACK,GAAG,IAAI,IAAI,GAC7B,IAAI,CAACL,MAAM,CAACI,gBAAgB,CAACE,IAAI,CAACC,GAAG,IAAI,IAAI,CAACP,MAAM,CAACI,gBAAgB,CAACI,GAAG,eAAQ,IAAI,CAACR,MAAM,CAACI,gBAAgB,CAACI,GAAG,IAAK,EAAE,CAAC,GACzH,IAAI,CAACR,MAAM,CAACK,GAAG;YACnB,IAAIF,KAAK,GAAG,IAAI,CAACH,MAAM,CAACC,MAAM,CAACC,iBAAiB,CAACC,KAAK;YACtD,IAAIM,IAAI,GAAG,IAAI,CAACT,MAAM,CAACC,MAAM,CAACC,iBAAiB,CAACO,IAAI;YACpD,IAAIN,KAAK,CAACE,GAAG,CAAC,EAAE;cACd,IAAII,IAAI,CAACC,MAAM,EAAE;gBACf,IAAIC,KAAK,GAAGF,IAAI,CAACG,OAAO,CAACP,GAAG,CAAC;gBAC7B,IAAIM,KAAK,GAAG,CAAC,CAAC,EAAE;kBACdF,IAAI,CAACI,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;gBACvB;cACF;cACA,OAAOR,KAAK,CAACE,GAAG,CAAC;YACnB;UACF;QACF;MACF;IACF;IACAvB,IAAI,EAAE;EACR;AACF,CAAC,CAAC"}]}